<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--

JavaScript Crunchinator Demo

Copyright 2001 by Mike Hall
Please see http://www.brainjar.com for terms of use.

JavaScript Obfuscator

Copyright 2009 by Ildar Shaimordanov

-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<HTA:APPLICATION ID="oHTA"
	APPLICATIONNAME="JavaScriptObfuscator"
	BORDER="dialog"
	BORDERSTYLE="normal"
	CAPTION="yes"
	CONTEXTMENU="yes"
	ICON=""
	INNERBORDER="no"
	MAXIMIZEBUTTON="no"
	MINIMIZEBUTTON="yes"
	NAVIGABLE="no"
	SCROLL="no"
	SCROLLFLAT="no"
	SELECTION="no"
	SHOWINTASKBAR="yes"
	SINGLEINSTANCE="no"
	SYSMENU="yes"
	VERSION="1.0"
	WINDOWSTATE="normal" />

<title>JavaScript Obfuscator</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<style type="text/css">

/**
 *
 * Common styles
 *
 */
*	{
	font-family: Verdana, Tahoma, Helvetica, sans-serif;
	font-size: 12px;
}
body	{
	margin: 0;
	padding: 0;
}
#body	{
	background-color: #ccc;
	height: 500px;
	padding-left: 1px;
	padding-right: 1px;
	width: 100%;
}

form#obuscatorForm	{
	margin: 0;
}

form#obuscatorForm h1	{
	font-size: 1.2em;
	margin: 0;
}
form#obuscatorForm fieldset	{
	padding: 5px;
}

textarea	{
	font-family: sans-serif;
	font-size: 12px;
	height: 200px;
	margin-left: auto;
	margin-right: auto;
	width: 100%;
}

.buttonGroup	{
	padding: 5px;
	text-align: right;
}

#statusLine	{
	border: 1px inset #ccc;
	height: 15px;
	margin-top: 15px;
	width: 100%;
}

#hollowBox	{
	bottom: 0;
	left: 0;
	position: absolute;
	right: 0;
	top: 0;
}

#helpBox	{
	background-color: #ccc;
	border: 1px outset #ccc;
	margin-left: auto;
	margin-right: auto;
	position: relative;
	top: 150px;
	width: 400px;
}
#helpBox h3	{
	background-color: #003366;
	color: #fff;
	padding: 10px;
}
#helpBox .content	{
	margin: 0;
	padding: 0 10px 10px 10px;
}

</style>
<script type="text/javascript" src="js/Obfuscate.js"></script>
<script type="text/javascript">//<![CDATA[

(function()
{

	var statusLine;
	var code_input;
	var code_output;
	var helpBox;

	var obfuscator;

	function obfuscate()
	{
		if ( code_input.value.length == 0 ) {
			return;
		}

		code_output.value = obfuscator.parse(code_input.value);

		var iLen = code_input.value.length;
		var oLen = code_output.value.length;

		statusLine.innerHTML = statusLine.innerHTML 
			+ ' <b>Size:</b> [' + iLen + '/' + oLen + ']' 
			+ ' <b>Saved:</b> ' + (100 - (oLen / iLen * 100)).toFixed(2) + '%';
	}

	function initWin()
	{
		// Get needful refs to form controls
		statusLine = document.getElementById("statusLine");
		code_input = document.getElementById("code_input");
		code_output = document.getElementById("code_output");
		helpBox = document.getElementById('helpBox');

		// Make the input box focused
		code_input.focus();

		// Create the obfuscator
		obfuscator	= new Obfuscator(function(text)
		{
			statusLine.innerHTML = text;
		});

		var start = document.getElementById('start');
		var copy = document.getElementById('copy');
		var clear = document.getElementById('clear');

		var interval = setInterval(function()
		{
			if ( helpBox.style.display != 'none' ) {
				return;
			}

			code_input.disabled = 
			code_output.disabled = 
			code_input.parentNode.disabled = 
			code_output.parentNode.disabled = false;

			var iLen = code_input.value.length;
			var oLen = code_output.value.length;

			start.disabled = ! Boolean(iLen);
			copy.disabled  = ! Boolean(oLen);
			clear.disabled = ! Boolean(iLen) && ! Boolean(oLen);
		}, 100);
	}

	function initHta()
	{
		var w = 700, h = 600;
		window.resizeTo(w, h);

		initWin();
	}

	/**
	 * Copy text to clipboard.
	 * Originally got from decompiled `php_manual_en.chm`.
	 *
	 * @access	private
	 */
	function copyText()
	{
		if ( ! document.body.createTextRange ) {
			return false;
		}

		var BodyRange = document.body.createTextRange(); 
		if ( ! BodyRange.moveToElementText ) {
			return false;
		}

		BodyRange.moveToElementText(code_output); 
		if ( ! BodyRange.execCommand ) {
			return false;
		}

		BodyRange.execCommand('Copy'); 
		return true;
	} 

	/**
	 * Handles mouse clicks(for HTA only)
	 *
	 * @access	private
	 */
	function handleClick(e)
	{
		var e = e || event;
		var target = e.target || e.srcElement;

		if ( ! target || target.tagName.toUpperCase() != 'INPUT' || target.type.toUpperCase() != 'BUTTON' || target.className != 'button' || target.disabled ) {
			return;
		}

		switch (target.id) {
		case 'start':
			obfuscate();
			break;
		case 'copy':
			code_output.select();
			if ( ! copyText() ) {
				alert('Clipboard operations are not supportable with your browser.');
			}
			break;
		case 'clear':
			target.form.reset();
			code_input.focus();
			statusLine.innerHTML = '';
			break;
		case 'help':
			helpBox.style.display = helpBox.style.display == 'none' ? 'block' : 'none';
			if ( helpBox.style.display == 'none' ) {
				break;
			}
			for (var ctrl, i = 0; i < target.form.elements.length; i++) {
				ctrl = target.form.elements[i];
				if ( ctrl == target ) {
					continue;
				}
				ctrl.disabled = ! ctrl.disable;
			}
			break;
		}
	}

	/**
	 * Handles keystrokes (for HTA only)
	 *
	 * @access	private
	 */
	function handleKeydown(e)
	{
		var e = e || event;
		var target = e.target || e.srcElement;

		// F5
		if ( e.keyCode == 116 ) {
//			return false;
		}

		// Ctrl+Enter
		if ( target && target.tagName.toUpperCase() == 'TEXTAREA' ) {
			if ( e.keyCode == 13 && ( e.ctrlKey || e.altKey ) ) {
				obfuscate();
				return false;
			}
		}
	}

	if ( window.attachEvent ) {
		if ( window.oHTA && oHTA.applicationName ) {
			window.attachEvent('onload', initHta);
		} else {
			window.attachEvent('onload', initWin);
		}
		document.attachEvent('onclick', handleClick);
		document.attachEvent('onkeydown', handleKeydown);
	} else {
		window.addEventListener('load', initWin, false);
		window.addEventListener('click', handleClick, false);
		window.addEventListener('keydown', handleKeydown, false);
	}

})();

//]]></script>

</head>
<body>

<div id="body">

<form action="" id="obuscatorForm" onsubmit="return false">

<h1>JavaScript Obfuscator</h1>
<div style="font-size: 9px;">Copyright &copy; 2001 by Mike Hall, <a tabindex="32767" target="_blank" href="http://www.brainjar.com">http://www.brainjar.com</a></div>
<div style="font-size: 9px;">Copyright &copy; 2009 by Ildar Shaimordanov</div>

<fieldset>
<legend>Input</legend>
<textarea id="code_input" tabindex="1" accesskey="I" wrap="soft" onfocus="this.select()"></textarea>
</fieldset>

<fieldset>
<legend>Output</legend>
<textarea id="code_output" tabindex="4" accesskey="O" wrap="soft" onfocus="this.select()" readonly="readonly"></textarea>
</fieldset>

<div class="buttonGroup">
<input class="button" type="button" id="start" tabindex="2" accesskey="S" title="Alt-S" value="Start" />
<input class="button" type="button" id="copy"  tabindex="3" accesskey="C" title="Alt-C" value="Copy" />
<input class="button" type="button" id="clear" tabindex="5" accesskey="L" title="Alt-L" value="Clear" />
<input class="button" type="button" id="help"  tabindex="6" accesskey="H" title="Alt-H" value="Help" />
</div>

</form>

<div id="statusLine"></div>

</div>

<div id="hollowBox">

<div style="display: none;" id="helpBox">
<h3>JavaScript Obfuscator Help</h3>
<div class="content">
<p>You can condense JavaScript code using this form. Just cut and paste any 
script code into the text area marked <strong>Input</strong>, press the <strong>Start</strong> button and 
the condensed version will appear under <strong>Output</strong>.</p>

<p>You can then use the <strong>Copy</strong> button to quickly highlight the output for
easy cut and paste into a new source file.</p>
</div>
</div>

</div>

</body>
</html>

